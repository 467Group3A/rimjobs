<!doctype html>
<html lang="en">

<head>
  <title>Rim Jobs</title>
  <link rel="icon" type="image/x-icon" href="/img/favicon.ico">
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS v5.2.1 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
  <!-- FontAwesome 6.2.0 CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
    crossorigin="anonymous" referrerpolicy="no-referrer"/>
  <!-- Rim Jobs CSS -->
  <link rel="stylesheet" href="/css/stylesheet.css">
</head>

<body>
  <header id="navbar"></header>
  <main>
    <div id="app">
      <h1>Replenish Inventory</h1>
      <form @submit.prevent="submitReplenish">
        <label for="partId">Part ID:</label>
        <input type="number" id="partId" v-model="partId" required>
        <br>
        <label for="quantity">Quantity:</label>
        <input type="number" id="quantity" v-model="quantity" required>
        <br>
        <button type="submit">Submit</button>
      </form>
      <p v-if="message">{{ message }}</p>
      <h1>Remove Inventory</h1>
      <form @submit.prevent="submitRemoval">
        <label for="partIdR">Part ID:</label>
        <input type="number" id="partId" v-model="partIdR" required>
        <br>
        <label for="quantityR">Quantity:</label>
        <input type="number" id="quantityR" v-model="quantityR" required>
        <br>
        <button type="submit">Submit</button>
      </form>
      <p v-if="messageR">{{ messageR }}</p>
    </div>
  </main>
  <footer>
    <!-- place footer here -->
  </footer>
  <!-- Bootstrap JavaScript Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
  <!-- JQuery -->
  <script src="https://code.jquery.com/jquery-3.6.4.min.js" integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous"></script>
  <!-- Vue.js -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <!-- Components -->
  <script src="/fetchNavbar.js"></script>
  <script>
        const app = Vue.createApp({
        data() {
          return {
            partId: null,
            quantity: null,
            partIdR: null,
            quantityR: null,
            message: '',
            messageR: ''
          };
        },
        methods: {
          submitReplenish() {
            fetch('/api/replenish', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify({
                partId: this.partId,
                quantity: this.quantity
              })
            })
            .then(response => {
              if (response.ok) {
                return response.json();
              } else {
                throw new Error('Network response was not ok.');
              }
            })
            .then(data => {
              this.message = data.message;
              this.partId = null;
              this.quantity = null;
            })
            .catch(error => {
              console.error('There was a problem with the fetch operation:', error);
              this.message = 'There was an error submitting the form. Please try again.';
            });
          },
          submitRemoval() {
            fetch('/api/replenish/removal', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify({
                partIdR: this.partIdR,
                quantityR: this.quantityR
              })
            })
            .then(response => {
              if (response.ok) {
                return response.json();
              } else {
                throw new Error('Network response was not ok.');
              }
            })
            .then(data => {
              this.messageR = data.message;
              this.partId = null;
              this.quantity = null;
            })
            .catch(error => {
              console.error('There was a problem with the fetch operation:', error);
              this.message = 'There was an error submitting the form. Please try again.';
            });
          }
        }
      })
      app.mount('#app');
  </script>
</body>
</html>


